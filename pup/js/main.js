"use strict";window.onload=init;let url="https://studenter.miun.se/~naha2204/dt173g/projekt_dt173g/php_api/meals/read.php",urlorder="https://studenter.miun.se/~naha2204/dt173g/projekt_dt173g/php_api/meals/readorder.php";const namninput=document.getElementById("namn"),personsinput=document.getElementById("persons"),emailinput=document.getElementById("email"),ankomstinput=document.getElementById("ankomst"),klockainput=document.getElementById("klocka"),error=document.getElementById("error"),meddelande=document.getElementById("meddelande"),addbtn=document.getElementById("add");function init(){getMeals(),createorder()}function createorder(e){e.preventDefault(),error.innerHTML="";let n=namninput.value,t=personsinput.value,a=emailinput.value,r=ankomstinput.value,d=klockainput.value,o=JSON.stringify({namn:n,persons:t,email:a,ankomst:r,klocka:d});fetch(urlorder,{method:"POST",headers:{"content-type":"application/json"},body:o}).then((e=>{if(201==e.status)return e.json().then((e=>clearform())).catch((e=>console.log(e)));error.innerHTML='<p class="error"> Fel vid bokning, vänlig försök igen </p> '}))}function clearform(){namninput.value="",personsinput.value="",emailinput.value="",ankomstinput.value="",klockainput.value="",meddelande.innerHTML='<p class="meddelande">Din bord är bokad </p> '}function getMeals(){fetch(url).then((e=>{if(200==e.status)return e.json().then((e=>addmeal(e))).catch((e=>console.log(e)))}))}function addmeal(e){const n=document.getElementById("meallist");n.innerHTML="",e.forEach((e=>{n.innerHTML+=` <div class ="mealitem"> <p> ${e.meal_name} </p> <p> ${e.meal_ingredient}. </p>\n     <p> Pris: ${e.price} kr. </p> </div> `}))}addbtn.addEventListener("click",createorder);